create table credit_tariffs (
    id int primary key generated by default as identity,
    type varchar(100),
    up_to_amount numeric(15, 2),
    up_to_credit_period int,
    credit_percent int
);
insert into credit_tariffs (type, up_to_amount, up_to_credit_period, credit_percent)
values ('t1', 1000000, 24, 16),
       ('t2', 2000000, 36, 16),
       ('t3', 3000000, 48, 15),
       ('t4', 4000000, 60, 15),
       ('t5', 5000000, 72, 14);

create table credit_requests (
    id bigint primary key generated by default as identity,
    credit_tariff_id int references credit_tariffs(id),
    credit_amount numeric(15, 2),
    credit_duration int,
    created_at timestamp,
    user_id int
);

create table credits_scoring (
    score numeric(15, 2),
    credit_request_id bigint primary key references credit_requests(id),
    status varchar(10)
);

create table credits (
    id bigint primary key generated by default as identity,
    initial_amount numeric(15, 2),
    taking_date date,
    percent int,
    credit_period int,
    month_amount numeric(15, 2),
    credit_status varchar(10),
    user_id int,
    credit_tariff_id int references credit_tariffs(id)
);

create table balances (
    id bigint primary key generated by default as identity,
    credit_id int references credits(id),
    remaining_debt numeric(15, 2),
    remaining_month_debt numeric(15, 2),
    accrued_by_percent numeric(15, 2),
    created_at date
);

create table penalties (
    id bigint primary key generated by default as identity,
    credit_id bigint references credits(id),
    type varchar(20),
    amount numeric(15, 2),
    status varchar(10),
    created_at date
);

create table payments (
    id bigint primary key generated by default as identity,
    credit_id bigint references credits(id),
    amount numeric(15, 2),
    commission_amount decimal(15, 2),
    created_at timestamp
);

truncate table credits cascade;
alter sequence credits_id_seq restart with 1;

insert into credits (id, initial_amount, taking_date, percent, credit_period, month_amount, credit_status, user_id, credit_tariff_id)
values (1, 1000, '2023-01-01', 15, 36, 100, 'OPEN', 1, 1),
       (2, 10000, '2025-01-01', 15, 36, 100, 'CLOSE', 1, 1);

truncate table payments;
insert into payments (id, credit_id, amount, commission_amount, created_at)
values (1, 1, 100, 10, '2023-01-02'),
       (2, 1, 110, 10, '2023-02-02'),
       (3, 1, 120, 10, '2023-03-02'),
       (4, 1, 130, 10, '2023-04-02'),
       (5, 1, 140, 10, '2023-05-02'),
       (6, 2, 100, 10, '2025-01-02'),
       (7, 2, 110, 10, '2025-02-02'),
       (8, 2, 120, 10, '2025-03-02'),
       (9, 2, 130, 10, '2025-04-02'),
       (10, 2, 140, 10, '2025-05-02')